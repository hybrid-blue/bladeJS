<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <script src="https://kit.fontawesome.com/a5f881d256.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"></script>
    <title><%= htmlWebpackPlugin.options.title %></title>
  </head>
  <body>
    <div id="root"></div>
  </body>

  <script type="text/javascript">

      const route = [
        {
          "home":{
            icon: "fa-home",
            data:{date: '17th December 2019'}
          }
        },
        {
          "about":{
            icon: "fa-question"
          }
        },
        {
          "contact":{
            icon: "fa-pencil-alt"
          }
        },
        {
          "profile":{
            icon: "fa-pencil-alt",
            nonRoute: true,
            subRoute:[
              {
                "ross":{
                  template: "layout-2"
                }
              },
              {
                "aaron":{
                  template: "layout-1",
                  data: {
                    name: "Aaron",
                    description: "I am the developer behind bladeJS",
                    text: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec finibus sagittis posuere."
                  },
                  subRoute:[
                    {
                      "item1":{
                        template: "layout-1"
                      }
                    },
                    {
                      'aaron2':{
                        template: "layout-1",
                        subRoute:[
                          {
                            "aaronsub2":{
                              template: "layout-1"
                            }
                          }
                        ]
                      }
                    },
                    {
                      "item3":{
                        template: "layout-1"
                      }
                    }
                  ]
                }
              },
              {
                'john':{
                  template: "layout-1"
                }
              },
              {
                'jake':{
                  template: "layout-1",
                  subRoute:[
                    {
                      "item1":{
                        template: "layout-1"
                      }
                    },
                    {
                      'item2':{
                        template: "layout-1",
                        subRoute:[
                          {
                            'subitem2':{
                              template: "layout-1"
                            }
                          }
                        ]
                      }
                    },
                    {
                      "item3":{
                        template: 'layout-1'
                      }
                    }
                  ]
                }
              }
            ]
          }
        }
      ]

      const app = new _.Blade({
        target: ".view-content",
        router: route
      });

      app.render({
        onAppInit:() => {
          console.log('=== 1 ===');
          app.state('push', {
            'appName': 'ToraCMS',
            'appType': 'Content Management System'
          });
        },
        onRouteInit: () => {
          console.log('=== 2 ===');
        },
        afterAppInit: () => {
          console.log('=== 3 ===');

        },
        onAppUpdate: () => {
          console.log('=== 4 ===');
        },
        onRouteChange: () => {
          console.log('=== 5 ===');

          console.log(app.get('template'));

          const route = app.get('route');

          if(route === '/profile/aaron/item3'){
            app.set('template', 'layout-2');
            app.set('data', {
              name: "Jane",
              description: "I love Cats",
              text: "Donec finibus sagittis posuere. Lorem ipsum dolor sit amet, consectetur adipiscing elit."
            })
          }

          console.log(app.get('template'));

          // console.log(app.get('subRoute'));
          // console.log(app.get('parentRoute'));
          // console.log(app.get('fullRoute'))
        }
      });

  </script>
</html>
