<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <script src="https://kit.fontawesome.com/a5f881d256.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"></script>
    <title><%= htmlWebpackPlugin.options.title %></title>
  </head>
  <body>
    <div id="root"></div>
  </body>

  <script type="text/javascript">

    const app = new _.Blade();

    const comp = new app.module('text-block');
    const test = new app.module("home", ['text-block']);

    comp.view(`
      <div class="component-wrapper">
        <input type="input" data-blade-bind="testmsg" />
        <div>{{testmsg}}</div>
      </div>
    `);
    comp.data({testmsg: '...Now with text!'})
    comp.renderComponent()

    test.view(`
      <div class="wrapper">
        <h1>{{title}}</h1>
        <h2>{{subtitle}}</h2>
        <input type="input" data-blade-bind="subtitle" />
        <ul class="fruits-list" data-blade-for="fruit in fruits">
          <li>
            <div>
              <span>{{msg}}: </span><span>{{fruit.name}} - {{fruit.desc}} - {{fruit.color}} - {{fruit.test.thing}}</span>
            </div>
          </li>
        </ul>
        <label>Element A</label>
        <input type="checkbox" data-blade-bind="typeA" checked="true"/>
        <label>Element B</label>
        <input type="checkbox" data-blade-bind="typeB" />
        <h3 data-blade-if="typeA">This is Element A</h3>
        <h3 data-blade-if="typeB">This is Element B</h3>
        <div class="click-area bg-{{color}}" data-blade-click="changeColor('value1', title)"></div>
        <hr />
        <input type="input" data-blade-bind="candy" />
        <div data-blade-switch="candy">
          <div data-blade-case="chocolate">You have typed 'Chocolate'</div>
          <div data-blade-case="carmel">You have typed 'Caramel'</div>
          <div data-blade-case="toffee">You have typed 'Toffee'</div>
          <div data-blade-default="true">This is the default case</div>
        </div>
        <text-block />
      </div>
    `);

    test.data({
      title: 'Type Something!',
      subtitle: 'BladeJS support reactive templating!',
      msg: 'This is a...',
      typeA: true,
      typeB: false,
      color: 'red',
      candy: '',
      fruits:[
        {name: 'Apples', desc: 'It`s green and crunchy'},
        {name: 'Oranges', desc: 'It`s round and orange'},
        {name: 'Bannanas', desc: 'It`s long and yellow', test:{thing: 'KNACK II BABY!!'}},
        {name: 'Melons', desc: 'It`s Hard and round', color: 'Green and Black'},
        {name: 'Strawberries', desc: 'It`s red and sweet'},
        {name: 'Grapes', desc: 'Juicey', test:{thing: 'Mah Boi!'}}
      ]
    })

    test.controller(({$data, $event}) => {
      $event.on('changeColor', function(e){
          let randColor = [
            'red',
            'blue',
            'green',
            'purple',
            'aqua',
            'yellow',
            'orange',
          ]
          let num = Math.floor(Math.random() * Math.floor(7));
          $data({color: randColor[num]})
      })
    })

    test.render('#root')


  </script>
</html>
